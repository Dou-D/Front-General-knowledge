<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      * {
        font-size: 24px;
      }
      .card {
        width: 10rem;
        height: 100%;
        background-color: aqua;
        padding: 1rem;
        margin: 1rem;
      }
      #allContent {
        display: flex;
        width: 100%;
        flex-wrap: wrap;
      }
    </style>
  </head>
  <body>
    <form
      action="http://localhost:3001/add"
      method="post"
      enctype="multipart/form-data"
    >
      <label for="name">è¾“å…¥ä½ çš„å§“å:</label>
      <input type="text" id="name" name="name" />
      <br />
      <label for="identity">è¾“å…¥ä½ çš„å­¦å·:</label>
      <input type="text" id="identity" name="identity" />
      <br />
      <label name="gender">é€‰æ‹©ä½ çš„æ€§åˆ«ï¼š</label>
      <input type="radio" name="gender" id="male" value="male" />ğŸ‘¦
      <input type="radio" name="gender" id="female" value="female" />ğŸ‘§
      <br />

      <label name="hobby">çˆ±å¥½ï¼š</label>
      <textarea name="hobby" id="hobby" cols="30" rows="10"></textarea>

      <br />
      <input type="submit" value="æäº¤" id="submit" />

      <button id="getall">æŸ¥çœ‹æ‰€æœ‰çš„æˆå‘˜</button>
      <div id="allContent"></div>
    </form>
    <script>
      const submit = document.querySelector("#submit");
      const form = document.querySelector("form");

      const getAllbtn = document.querySelector("#getall");
      getAllbtn.addEventListener("click", (e) => {
        e.preventDefault();
        getAll();
      });
      
      function getAll() {
        fetch("http://localhost:3001/getAll", {
          method: "GET",
        })
          .then((response) => response.json())
          .then((data) => {
            const allContent = document.querySelector("#allContent");
            allContent.innerHTML = "";
            data.map((item) => {
              const card = document.createElement("div");
              card.className = "card";
              card.textContent = `
                å§“åï¼š${item.name}
                å­¦å·ï¼š${item.identity}
                æ€§åˆ«ï¼š${item.gender === "male" ? "ğŸ‘¦" : "ğŸ‘§"}
                çˆ±å¥½ï¼š${item.hobby}
                `;
              allContent.append(card);
            });
          })
          .catch((error) => console.error("Error:", error));
      }
      getAll();
    </script>
  </body>
</html>
